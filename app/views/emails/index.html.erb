<h1>Liste des emails</h1>

<!-- Bouton "recevoir un email" -->
<!-- Le href renvoie sur la méthode "create" du controller "emails_controller.rb". Cette méthode va créer un nouvel email via Faker. -->
<!-- On rajoute "data-remote="true"" pour indiquer que le lien va suivre le protocole AJAX -->
<!--<a href="<%= emails_path%>" data-method="POST"><button class="btn btn-primary" style="margin: 23px;" data-remote="true">Recevoir un email</button></a>-->
<%= link_to "recevoir un email", emails_path, method: :post, remote: true, class:"btn btn-primary", style:"margin: 22px" %>

<!-- Tableau d'affichage des emails -->
<div  id="object-list" class="container row" style="border: 2px solid black; border-radius: 10px; display: flex; flex-direction: row; justify-content: space-between; margin: 23px;">

  <!-- En-têtes -->
	<div class="container row" style="border: 0px solid white; margin-top: 13px;">
    <div class="col-6">
    	<h2 style="font-size: 20px;">Liste des emails</h2>
    </div>
    <div class="col-6">
    	<h2 style="font-size: 20px;">Email sélectionné</h2>
    </div>
	</div>


  <div class="container row">
		<% @emails.each do |email| %>

      <!-- Colonne pour les objets des emails -->

      <!-- Si l'email n'a pas été lu ou est marqué comme non lu -->
      <% if email.read == false %>

		    <div class="col-6" style="border: 0px solid white;">
					<p id="email_<%= email.id() %>" style="font-weight: bold;"><%= link_to "#{email.object}", email_path(email), method: :get, remote: true %></p>
				</div>
      
      <!-- Si l'email a été lu -->
			<% else %>

			  <div class="col-6" style="border: 0px solid white;">
					<p id="email-object"><%= link_to "#{email.object}", email_path(email), method: :get, remote: true %></p>
				</div>

			<% end %>


      <!-- Colonne pour le contenu des emails -->
	    <div id="display-email" class="col-6" style="border: 0px solid white;">
			</div>

		<% end %>

	</div>

</div>
